<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AITUBE 2.0</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>

    <!-- 1. SPLASH SCREEN -->
    <div id="splash-screen">
        <div class="splash-content">
            <h1 class="neon-text-big splash-title">AITUBE 2.0</h1>
        </div>
    </div>

    <!-- 2. ANIMATED BACKGROUND -->
    <div id="app-background"></div>
    <div id="lava-background" aria-hidden="true">
        <div class="lava-zone left"></div>
        <div class="lava-zone right"></div>
    </div>

    <!-- 3. GREETING & TOAST -->
    <div id="greeting-overlay" class="hidden">
        <h1 id="greeting-text" class="neon-text-big fade-text"></h1>
    </div>
    <div id="toast-container" class="toast-container"></div>

    <!-- 4. AUTH SCREEN -->
    <div id="auth-screen" class="screen hidden">
        <div class="auth-container neon-box">
            <h1 class="neon-text-big">AITUBE 2.0</h1>
            <form id="login-form">
                <input type="text" id="login-username" placeholder="Логин" required class="neon-input">
                <input type="password" id="login-password" placeholder="Пароль" required class="neon-input">
                <button type="submit" class="neon-btn full-width">ВОЙТИ</button>
                <p class="switch-auth">Нет аккаунта? <span id="to-register">Зарегистрироваться</span></p>
            </form>
            <form id="register-form" class="hidden">
                <input type="text" id="reg-name" placeholder="Имя профиля" required class="neon-input">
                <input type="text" id="reg-username" placeholder="Логин (@tag)" required class="neon-input">
                <input type="password" id="reg-password" placeholder="Пароль" required class="neon-input">
                <button type="submit" class="neon-btn full-width">СОЗДАТЬ АККАУНТ</button>
                <p class="switch-auth">Есть аккаунт? <span id="to-login">Войти</span></p>
            </form>
        </div>
    </div>

    <!-- 5. APP LAYOUT SCREEN -->
    <div id="app-layout" class="screen hidden">
        <header class="app-header">
            <button id="drawer-toggle" class="neon-icon-btn"><i class="fas fa-bars"></i></button>
            <div class="search-bar">
                <input type="text" placeholder="Поиск..." class="neon-input-sm">
                <button class="neon-btn-secondary-sm"><i class="fas fa-search"></i></button>
            </div>
            <button id="header-upload-btn" class="neon-icon-btn"><i class="fas fa-plus"></i></button>
        </header>

        <div id="drawer" class="drawer">
            <div id="drawer-backdrop"></div>
            <div class="drawer-content">
                <button class="drawer-item" data-target="video-feed"><i class="fas fa-home"></i> Главная</button>
                <button class="drawer-item" data-target="subscriptions-view"><i class="fas fa-heart"></i> Подписки</button>
                <button class="drawer-item" data-target="my-channel"><i class="fas fa-tv"></i> Мой канал</button>
                <div style="flex:1"></div>
                <button class="drawer-item" id="logout-btn"><i class="fas fa-sign-out-alt"></i> Выход</button>
            </div>
        </div>

        <main id="main-content">
            <section id="video-feed" class="view active">
                <div class="grid-layout" id="video-list"></div>
            </section>

            <section id="shorts-feed" class="view hidden">
                <div id="shorts-container" class="shorts-scroll"></div>
                <div class="shorts-nav-overlay">
                    <button class="neon-icon-btn" onclick="scrollShorts(1)"><i class="fas fa-chevron-down"></i></button>
                </div>
            </section>

            <section id="subscriptions-view" class="view hidden">
                <h2 style="padding: 20px 20px 0;">Ваши подписки</h2>
                <div class="grid-layout" id="subscriptions-list"></div>
            </section>

            <section id="other-channel-view" class="view hidden">
                <div class="profile-card">
                    <div class="avatar-frame avatar-lg">
                        <img src="/assets/avatar-placeholder.svg" id="oc-avatar" class="avatar-img">
                    </div>
                    <h2 id="oc-name">Имя канала</h2>
                    <p id="oc-tag">@tag</p>
                    <p id="oc-subs-count" style="color: var(--primary)">0 подписчиков</p>
                    <button id="oc-sub-btn" class="neon-btn full-width">Подписаться</button>
                </div>
                <h3 style="padding: 20px;">Видео канала</h3>
                <div id="oc-videos-list" class="grid-layout"></div>
            </section>

            <section id="video-player-view" class="view hidden">
                <button id="player-back-btn" class="neon-icon-btn back-btn-overlay"><i class="fas fa-arrow-left"></i></button>
                
                <div class="player-wrapper" id="player-fullscreen-container">
                    <video id="main-player" controls autoplay playsinline controlsList="nodownload"></video>
                    <button id="custom-fullscreen-btn" class="neon-icon-btn fullscreen-btn-overlay"><i class="fas fa-expand"></i></button>
                </div>
                
                <div class="video-info-container">
                    <div class="video-header-row">
                        <div class="channel-link" id="vp-channel-link">
                            <img src="/assets/avatar-placeholder.svg" id="vp-channel-avatar" class="channel-avatar-sm">
                        </div>
                        <div class="video-titles">
                            <h2 id="vp-title" class="expandable-title">Название <i class="fas fa-chevron-down text-muted" style="font-size:0.8rem"></i></h2>
                            <div id="vp-desc" class="video-description hidden">Описание...</div>
                        </div>
                    </div>

                    <div class="actions-row">
                        <button id="like-btn" class="neon-btn-secondary"><i class="fas fa-thumbs-up"></i> <span id="likes-count">0</span></button>
                        <button id="sub-btn" class="neon-btn">Подписаться</button>
                        <span id="vp-subs-count" style="margin-left:10px; color:#aaa; align-self:center;"></span>
                    </div>

                    <div class="comments-section">
                        <h3>Комментарии</h3>
                        <div class="comment-input-row">
                            <input type="text" id="comment-text" placeholder="Написать..." class="neon-input">
                            <button id="send-comment" class="neon-btn-secondary"><i class="fas fa-paper-plane"></i></button>
                        </div>
                        <div id="comments-list"></div>
                    </div>
                </div>
            </section>

            <section id="profile-view" class="view hidden">
                <div class="profile-card">
                    <div class="avatar-frame avatar-lg">
                        <img src="assets/avatar-placeholder.svg" id="profile-avatar" class="avatar-img" onerror="this.src='assets/avatar-placeholder.svg'">
                    </div>
                    <h2 id="profile-name">Имя</h2>
                    <p id="profile-username">@tag</p>
                    <form id="profile-edit-form">
                        <input type="text" id="edit-name" placeholder="Новое имя" class="neon-input">
                        <input type="password" id="edit-pass" placeholder="Новый пароль" class="neon-input">
                        <label class="file-label">
                            <i class="fas fa-camera"></i> Сменить фото
                            <input type="file" id="edit-avatar-file" accept="image/*" hidden>
                        </label>
                        <div id="avatar-preview-name" class="file-preview-text"></div>
                        <button type="submit" class="neon-btn full-width">Сохранить</button>
                    </form>
                    <div class="profile-actions">
                        <button id="toggle-theme" class="neon-btn-secondary full-width">Сменить тему</button>
                        <button id="delete-acc-btn" class="neon-btn-danger full-width">Удалить аккаунт</button>
                    </div>
                </div>
            </section>

            <section id="my-channel" class="view hidden">
                <div id="create-channel-ui" class="hidden center-container">
                    <div class="center-card neon-box">
                        <h2 class="text-center neon-title-md">Создать канал</h2>
                        <p class="text-center text-muted">Придумайте название и уникальный тег</p>
                        <form id="create-channel-form" class="compact-form">
                            <input type="text" id="ch-name" placeholder="Название" required class="neon-input">
                            <input type="text" id="ch-tag" placeholder="@tag" required class="neon-input">
                            <button type="submit" class="neon-btn full-width">Создать</button>
                        </form>
                    </div>
                </div>
                <div id="channel-view-ui" class="hidden">
                    <div class="channel-header">
                        <h2 id="ch-view-name">Мой канал</h2>
                        <p id="ch-view-subs" style="color:var(--primary)">0 подписчиков</p>
                        <button id="upload-video-hero-btn" class="neon-btn">+ Видео</button>
                    </div>
                    <div id="ch-videos-list" class="grid-layout"></div>
                </div>
            </section>
        </main>

        <nav class="bottom-nav">
            <button class="nav-item active" data-target="video-feed"><i class="fas fa-play-circle"></i> Видео</button>
            <button class="nav-item" data-target="shorts-feed"><i class="fas fa-bolt"></i> Шортсы</button>
            <button class="nav-item" data-target="profile-view"><i class="fas fa-user"></i> Профиль</button>
        </nav>
    </div>

    <!-- Modals -->
    <div id="upload-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>Загрузка Видео</h2>
            <form id="upload-form">
                <input type="text" name="title" placeholder="Название" required class="neon-input">
                <textarea name="description" placeholder="Описание" class="neon-input"></textarea>
                
                <div class="neon-toggle-wrapper">
                    <label class="neon-toggle">
                        <input type="checkbox" name="isShort" id="isShortCheck">
                        <span class="slider"></span>
                    </label>
                    <span class="toggle-label">Это Shorts</span>
                </div>

                <div class="upload-row">
                    <label class="file-label"><i class="fas fa-video"></i> Видеофайл
                        <input type="file" name="video" accept="video/*" required hidden id="video-file-input">
                    </label>
                    <div id="video-file-display" class="file-preview-text"></div>
                </div>

                <div class="upload-row">
                    <label class="file-label"><i class="fas fa-image"></i> Обложка
                        <input type="file" name="thumbnail" accept="image/*" hidden id="thumb-file-input">
                    </label>
                    <div id="thumb-file-display" class="file-preview-text"></div>
                    <img id="thumb-preview-img" class="preview-img hidden">
                </div>

                <div class="modal-actions">
                    <button type="button" class="neon-btn-secondary close-modal-btn">Отмена</button>
                    <button type="submit" class="neon-btn">Опубликовать</button>
                </div>
            </form>
        </div>
    </div>

    <div id="confirm-modal" class="modal">
        <div class="modal-content text-center">
            <h3>Вы уверены?</h3>
            <p>Это действие нельзя отменить.</p>
            <div class="modal-actions">
                <button id="confirm-cancel" class="neon-btn-secondary">Отмена</button>
                <button id="confirm-ok" class="neon-btn-danger">Удалить</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>